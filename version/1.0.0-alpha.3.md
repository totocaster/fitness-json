---
description: Complete specification and documentation of fitnessÂ·json file format family.
---

# 1.0.0-alpha.3

fitnessÂ·json is a family of data interchange objects based on JavaScript Object Notation \(JSON\) designed specifically for the storing and sharing of sport, fitness, and health data. It defines several types of JSON objects and how they are combined to represent data about athlete's workouts, fitness profile, and guided workout instructions.

The whole ecosystem is designed for endurance athletes such as runners, cyclists, triathletes, para-triathletes, and alike. Format of the data is friendly to bothâ€”computers and humansâ€”and can be easily explored, adjusted, and extended.

{% hint style="danger" %}
This is an alpha version of the fitnessÂ·json. Things will break, frequently. Spec is not ready for the prime time, or usage in production software.
{% endhint %}

### Requirements Language

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in [RFC2119](https://tools.ietf.org/html/rfc2119).

### File Format

fitnessÂ·json objects can be stored to persistent storage as files. Such, self-contained objects must have `version` key at the very top of the root object.

Files should be pretty-printed as it is friendlier to humans. In cases where larger file sizes are an issue, the content may be compacted by stripping the whitespaces.

#### File Extensions

`.json` is highly recommended. When this cases issues, `.fitjson` is sensible fallback.  

#### Macintosh UTIs

* Workout file: `org.fitnessjson.workout`, conforms to `public.json`.
* Guide file: `org.fitnessjson.guide`, conforms to `public.json`.
* Route file: `org.fitnessjson.route`, conforms to `public.json`.

## Workout

Workout object is self-contained and can be represented as a single file. Purpose of the workout object is to contain all activities completed as one workout along with its completion status, post-workout comments, and athlete's profile at the moment of workout.

### Top Level

> Example of the completed workout:

```javascript
{
  "version": "https://fitnessjson.org/version/1.0.0-alpha.2#workout",
  "title": "2019-04-29 [T1] Tempo Run (interupted)",
  "status": "complete",
  "activities": [
    {
      "sport": "cycle",
      "env": "outdoor",
      "start_date": "date",
      "samples": [
        {
          "t": 123123123,
          "hr": 84,
          "p": 189
        },
        {
          "t": 123123123,
          "hr": 85,
          "p": 174
        },
        {
          "t": 123123123,
          "hr": 83,
          "p": 182
        }
      ],
      "laps": [
        { "t": 1235323, "trigger": "user" }
      ]
    },
    {
      "sport": "run",
      "env": "outdoor",
      "start_date": "date",
      "samples": [
        {
          "t": 123123123,
          "hr": 110,
        }
      ]
    }
  ]
}
```

Typical workout object contains an array of [activities](../#activity), valid [status](../#activity-options) value, and [version](../#top-level).

Note that workouts start date is `start_date` of its first activity. Workouts with empty `activities` array and status anything other than `empty` are invalid.

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `version` | string | âœ“ | URL of the version of the format the object and/or file. |
| `title` | string |  | Title of the workout for easy identification. |
| `activities` | [\[activity\]](../#activity) | âœ“ | An array of activities that are part of the workout. If the array has more that one activity, the workout is considered to be a _multi-sport workout_.\* |
| `status` | [status](../#activity-options) | âœ“ | Completion status of the workout. |
| `comments` | [\[comment\]](../#comment) |  | Post-workout comments or discussion. May contain many [comments](../#comment) from various [people](../#author). |
| `profile` | [profile](../#profile) |  | A snapshot of the profile at the time of workout completion.[â€¡]() |
| `guide` | [guide](../#guide) |  | A snaptshot of the performed guide. Optional; athelete may not want to share this. |
| `route` | [route](../#route) |  | A snaptshot of the route if athelete was suing one uppon completion of the workout. Optional; athelete may not want to share this. |

#### Triathlon and Multisport Transitions

Triathlon and multisport transitions are distinct activities. Such objects have `sport: transition` key-value pair in them.

### Workout Status

Workouts may have one of several statuses depending on circumstances when workout object was stored.

| Value | Description |
| :--- | :--- |
| `empty` | The workout is newly created or has no meaningful data. |
| `incomplete` | Workout has incomplete data. An athlete should have an opportunity to carry-on recording data. |
| `complete` | **Default** value. The workout is complete and must not be modified. |

#### Causes of Incomplete Workout

Incomplete workouts can exist for several reasons. One of those could be a recorder malfunction. Consider the following when you face such condition:

1. Recorder should write workout object to persistent storage periodically so that in case of the fatal crash only a minimal amount of data is lost.
2. The recorder should set the `status` key to `incomplete` while recording and resets it to `complete` only when an athlete explicitly finishes the workout \(or, guided workout finishes the activity.\)
3. When `status` is `incomplete`, the athlete should have an opportunity to restore the recording state and carry-on activity within a reasonable time interval after the last sample.

### Embeded Profile

> Example of a workout with an embedded profile:

```text
{
  "version": "https://fitnessjson.org/version/1.0.0-alpha.2#workout",
  "activities": [{ }], // redacted
  "status": "complete",
  "profile": {
    "lthr": 169,
    "ftp": 220,
    "vo2max": 39,
    "weight": 74.4,
  }
}
```

Athlete's fitness level and body measurements change over time, hence the variable nature of [profile]() over time. To provide better context for the workout, athletes may include their profile in completed workout object for later reference.

For instance, let's imagine an athlete preparing for an upcoming cycling event. Her weight three weeks ago was different from the current. Because of that, when she's analyzing data from three weeks old workout, her `w/kg` power measurements must be calculated from the embedded profile that possesses her weight at the time of the workout. This guarantees measurements she's looking at match reality at the time of the workout.

### Sharing Practices

Information stored in workout objects and files can be highly sensitive, both from the privacy perspective, as well as the athlete's competitive advantage.

When sharing workout online or with another party, consider the following:

* The sharer should not share object as-is unless athlete explicitly consents such action.
* The app should provide an opportunity to omit information from the object before sharing it online. Good candidates for removal are the complete profile, cycling power from every sample, comments, partial profile \(e.g., include `weight`, but omit `email` and `ftp`\).

## Activity

```javascript
{
  "sport": "cycle",
  "env": "outdoor",
  "start_date": "date",
  "samples": [ ],
  "laps": [ ],
  "markers": [ ]
}
```

Activity object describes one activity of particular sport performed in a single environment. Some examples of activity are _Outdoor Run_, _Indoor Cycle_, _Outdoor Handcycle_, _Open-water Swim_, and _Outdoor \[Triathlon\] Transition_. An ordered sequence of activities put in workout object forms a multi-sport workout. Most workouts contain single activity.

Apart from describing the environment and sport, activity objects contain recorded data. Data collected from various sensors and data providers must be sequentially stored in [samples]() array.

Additionally, activities contain [lap events]() and [markers]().

#### Top Level

The typical activity contains [sport](), [environment](), start date, and an array of [samples]().

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `version` | string | âœ“ | URL of the version of the format the object. |
| `sport` | [sport]() | âœ“ | The sport of the activity. |
| `env` | [environment]() | âœ“ | An environment of the activity. |
| `start_date` | [date]() | âœ“ | Date when activity is started. This date may not match `t` value from the first sample, as data from the senrsos may be delayed. |
| `samples` | [\[sample\]]() | âœ“ | Samples recorded during the activity ordered chronologically. Oldest samples first. |
| `laps` | [\[lap\]]() |  | An array of all lap events. Both, automatic and user-generated. |
| `markers` | [\[marker\]]() |  | An array of user markers. |
| `options` | [\[string\]]() |  | Set of options that hint parser about how to approach data. |

### Activity Options

> Example of activity performed on a tandem bicycle:

```javascript
{
  "sport": "cycle",
  "env": "outdoor",
  "options": ["raw", "PTVIx"],
  "start_date": "2019-04-20T04:20:42+00:00",
  "samples": [ 
    // { ... } 
  ],
}
```

#### General Options

| Value | Description |
| :--- | :--- |
| `raw` | Tells parser that data is not processed and might need smoothing. Usually indicates that recorder didn't aply any filters when recording data from sensors. |
| `user_adjusted` | Contents of the activity was adjusted or modified by user. Samples should not need any smoothing or filtering. |

{% hint style="info" %}
If `options` key is missing or is empty, parser must assume that data is presented in a `raw` state.
{% endhint %}

#### Accessibility Options

Some activities can not be described completely using environment and sport alone. For such cases, `options` should provide more information.

| Value | Description |
| :--- | :--- |
| `PTWCx` | Athlete uses a recumbent handcycle on the bike course and a racing wheelchair on the run segment \(in context of triathlon.\) |
| `PTSx` | In both bike and run segments \(in context of triathlon,\) amputee athletes use prosthesis or other supportive devices. |
| `PTVIx` | Athlete rides a tandem. |

### Sample

The sequence of ordered samples is the foundation of successful data analysis.

> Annotated example of a sample:

```javascript
{
  "t": 1555678832,    // datetime, unix epoch time
  "hr": 80,           // heart rate, bpm
  "s": 1.4,           // speed, m/s
  "l": {              // location object
    "lt": 36.486331,  // latitude
    "ln": 136.756827, // longitude
    "ha": 5           // horizontal accuracy, meters
  },
  "p": 200,           // power, watts
  "pb": 0.54,         // power left-right ratio
  "el": 0.2,          // elevation delta, meters
  "alt": 2314.2,      // altitude, meters
  "grd": 2.1,         // grade, % slope
  "at": 24.7,         // temperature, celsius
  "d": 3.12,          // displacement, meters
  "cd": 5001.4        // cumulative distance, meters
  "c": 80,            // cadecne, rpm
  "crs": 98.34        // course, degrees
}
```

| Key | Type | Unit | Description |
| :--- | :--- | :---: | :--- |
| `t` | [datetime]() |  | MThe moment when sensors and data providers were sampled for the measurements. |
| `hr` | int | BPM | Heart rate measurement |
| `l` | [location]() |  | Geographical 2D location of an athlete |
| `p` | double | W | Total power measurement |
| `pb` | double |  | Power bias, or distributions between left and right limbs. Must be ignored if the sample has no `p` measurement. |
| `c` | int | rpm[â€ ]() | Cadence measurement |
| `s` | double | m/s | Speed measurement |
| `crs` | double | ÂºN | Courseâ€”the direction in which the athlete is traveling, measured in degrees and relative to due north. |
| `d` | double | m | Displacementâ€”the distance from the last sample that contains `d` key. |
| `cd` | double | m | Cumulative distanceâ€”total distance covered from the start of the [activity](1.0.0-alpha.3.md#activity). |
| `alt` | double | m | Absolute altitude of an athlete from sea level. |
| `el` | double | m | Elevationâ€”the altitude delta from the beginning of the activity. |
| `vosc` | double | cm | Vertical oscillation measurement \(part of running dynamics.\) |
| `gct` | double | ms | Ground contact time measurementâ€”the time an athlete spends touching ground during the running stride \(part of running dynamics.\) |
| `stpl` | double | m | Step lengthâ€”the length of the single stride \(part of running dynamics.\) |
| `grd` | double | % | Grade of the slope athlete is on. |
| `at` | double | ÂºC | Ambient temperature measurement. |

An empty sample is considered to be invalid and must be ignored. Non-empty sample must contain **`t` and at least one other measurement**. Sample containing the only `t` is also invalid and must be ignored.

#### Location

> Example of a location object with a latitude, longitude, horizontal accuracy of 30 centimeters and vertical accuracy of 5 meters:

```javascript
{
  "lt": 35.679687,
  "ln": 139.757583,
  "ha": 0.3,
  "va": 5,
}
```

Location object describes a geographical location on a 2D plane. Location object may include 2D or 3D precision of the location. Precision values may help data analysis software to calculate an athlete's relative path in a more precise manner.

| Key | Type | Req. | Unit | Description |
| :--- | :--- | :---: | :---: | :--- |
| `lt` | double | âœ“ | degrees[â€ ]() | The latitude in degrees |
| `ln` | double | âœ“ | degrees[â€ ]() | The longitude in degrees |
| `ha` | double |  | m | Horizontal accuracy |
| `va` | double |  | m | Vertical accuracy |

It is recommended to store unprocessed location data from the sensors. Smoothing and other filtering techniques can be applied after data is decoded.

#### Displacement and Cumulative Distance

Unlike most fitness file formats, fitnessÂ·json supports two types of measurements to indicate athletes movement in terms of distance. TODO.

When activity is completed outdoors with good GPS data, both _cumulative distance_ and _displacement_ can be recalculated, adjusted, or ignored. 

#### Latitude and Longitude Units

Positive values indicate latitudes north of the equator. Negative values indicate latitudes south of the equator.

#### Cadence Units

Cadence unit depends on the [sport](). For simplicity's sake, it is generalized as RPM \(revolutions per minute\). However, it could mean SPM \(steps per minute\) for running, and PPM \(pushes per minute\) for a wheelchair.

#### Power Bias

Power bias \(value of `pb`\), or power distribution is a ratio of work between athlete's left and right limbs. Value of `0.0` means that the athlete's right limb is doing all of the work and value of `1.0` means that the athlete's left limb is doing all of the work.

```javascript
{
  "t": 1555750866,
  "p": 234,
  "pb": 0.53
}
```

For instance, imagine athlete producing 234 watts on a bicycle equipped with a dual-side power meter. Power bias value is 0.53, meaning athlete is producing 124W \(53% of the total power\) with the left leg and 110W \(47%\) with the right leg.

A sample may not have power bias object while having value for `p`. Such a case, as an example, maybe be when the bicycle is equipped with a left-only power meter.

### Lap

> Typical lap event triggered by an athlete:

```javascript
{
  "t": "2019-04-20T04:20:42+00:00",
  "trigger": "manual"
}
```

Lap object describes an event. Lap events can be triggered manually by an athlete, or automaticallyâ€”by fitness equipment or the [guide]().

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `t` | datetime | âœ“ | Datetime of the event triggered |
| `trigger` | [lap\_trigger]() |  | DSescribes what or who triggred an event. |

#### Lap Trigger

Lap trigger describes means by which lap event was initiated.

| Value | Description |
| :--- | :--- |
| `unknown` | **Default** value. Asumed when no `trigger` is present in lap object. |
| `manual` | Athelete pushed _Lap_ button. |
| `distance` | Distance based auto-lap feature of an app. |
| `timer` | Time based auto-lap feature of an app. |
| `posision` | Geographical position or fence. |
| `equipment` | Fitness equpement requeested start of new lap. |
| `guide` | [Guide]() procedded to next interval or block. |

### Marker

> Simple marker noting a particular moment:

```javascript
{
  "t":"2019-04-20T04:20:42+00:00"
}
```

> Marker with a note:

```javascript
{
  "t":"2019-04-20T04:20:42+00:00",
  "note": "Feels like I've hit the wall."
}
```

Marker object describes a specific point in time of the activity for the later reference. Marker object `t` value can be mapped to the corresponding sample and its measurements by the data analysis software.

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `t` | datetime | âœ“ | Mokent of time to mark. |
| `trigger` | string |  | Short note. |

## Guide

Guide, or Guided Workout, is an object or file with a set of instructions of how the athlete should perform the activity. Guides are great tools for structured workouts as they can be as loose or as strict as the author designs them to be.

### Anatomy of Guide

There are couple of object object that make up a single guide.

ðŸ‘‰ TODO: Visualisation of the guide, its intervals, and blocks.

Guides consist of [intervals](), [blocks]() are groups of blocks, and blocks are atomic objects that describe a single step of work in the guide. The guide can be visualized as a queue of blocks. Intervals unify some blocks into groups and tells the guide what environment, sport and repeat count they share.

#### Top Level

```text
{
  "version": "https://fitnessjson.org/version/1.0.0-alpha.2#gudie",
  "title": "Tempo Ride",
  "symbol": "T1",
  "symbol_color": "#FF9900",
  "intervals": [
    {
      // ...
    }
  ],
  "description": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
  "author": {
    "name": "John Appleseed",
    "email": "johnappleseed@example.com",
    "link": "https://leopardskins-cyclingclub.org"
  },
  "created_at": "2019-04-21T00:41:57+00:00",
  "ref": "https://leopardskins-cyclingclub.org/guides/"
}
```

Non-empty guides must have at least one interval with at least one block. Otherwise, the guide is considered to be empty. The empty guide is not suitable for workout and should be ignored or edited.

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `version` | string | âœ“ | URL of the version of the format the object and/or file. |
| `title` | string |  | Title of the guide. |
| `symbol` | string |  | Abbreviation or shorthand code for easy guide identification. No more than two characters. |
| `symbol_color` | string |  | Color of the symbol for easy guide identification. A 16-bit, hexadecimal representation of the color. e.g. `#FF9900` for the orange. May not contain leading `#`. |
| `description` | string |  | A relatively long-form description of the guide. An excellent place to inform the athlete what this guide is trying to achieve, what to expect during the workout and any other information that may be useful for the athlete before she starts the workout. |
| `intervals` | [\[interval\]]() | âœ“ | An array of ordered intervals. |
| `author` | [author]() |  | Name and contact information of the author of this guide. |
| `created_at` | datetime | âœ“ | The date and time of guide creation. |
| `ref` | string |  | Reference URL pointing to any auxiliary or related information. |

### Interval

> Example of segnment with two blocks that will be repeated twice in the workout.

```text
{
  "title": "Max Power",
  "env": "outdoor",
  "sport": "run",
  "repeats": 2,
  "blocks": [
    {
      // ...
    },
    { 
      // ...
    }
  ],
  "description": "Maximum effort followed by 2 min rest. Two sets. Go!"
}
```

Interval objects provide structure to the guide. They group related blocks, as well as tell the guide what environment and sport those blocks should be performed. Intervals also can have repeat count, thus eliminating the need to have duplicate groups of blocks in sequence.

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `repeats` | int \[1..âˆž\)[â€ ]() |  | The number of repeats. Describes how many times a set of blocks should be repeated during a workout. |
| `title` | string |  | Title of the interval. |
| `sport` | [sport]() | âœ“ | Sport. |
| `env` | [environment]() | âœ“ | Environment. |
| `blocks` | [\[block\]]() | âœ“ | An array of ordered blocks that are part of this interval. |
| `description` | string |  | Short instruction and overview of the block for the athlete. |

#### Repeats

When `repeat` has a value greater than `1`, the guide should put the interval's first block in the queue right after its last block. Only after blocks in the interval has been performed `repeat` times, the guide must advance to the next interval \(first block of the next interval\). This process should repeat until the guide has run out of blocks and their parent intervals.

`repeat` is optional, and when absent from the object, the decoder should assume the value of `1`. Values less than `1` are invalid.

### Block

```javascript
{
  "type" : "work",
  "duration" : {
    "condition" : "gte",
    "trigger" : "distance",
    "value" : 5000
  },
  "target_type" : "rvalue",
  "target_rvalue" : {
    "anchor" : "threshold",
    "lower" : 0.95,
    "upper" : 1.05,
    "metric" : "heart_rate"
  },
  "description" : "Run for 5K. Try to be near your LTHR.",
}
```

Block object, or work block, describes a single unit of work in the guide. Block can be one of [several types](), have completion condition, and optionally, target. Targets itself, can be [one of four types]().

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `type` | [type]() | âœ“ | Type of the block. Describes the kind of work to perform. |
| `duration` | [duration]() | âœ“ | The condition upon meeting which block is complete and guide advances to the next block. |
| `target_type` | [target\_type]() | âœ“ | Type of the target. |
| `target_value` | [value\_target]() |  | The object describing target when `target_type` is `value`. |
| `target_rvalue` | [rvalue\_target]() |  | The object describing target when `target_type` is `rvalue`. |
| `target_zone` | [zone\_target]() |  | The object describing target when `target_type` is `zone`. |
| `description` | string |  | Short instruction and overview of the block. |

#### Block Type

Block type object describes the nature of work in the current block. Those are provided mostly for visual reference. Type of work does not affect the block's completion duration, nor on target.

| Value | Description |
| :--- | :--- |
| `warmup` | Warm-up. |
| `work` | Relatively hi-intensity activity. |
| `rest` | Lower intensity activity. |
| `cooldown` | Cooldown. |

### Block Completion

The guide can advance by itself or manually. Block completion object describes exact instruction on how the block should advance to the next block in the guide.

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `trigger` | [trigger]() | âœ“ | What triggers advancement to the next block. |
| `condition` | [condition]() |  | What conditions should be satisfied by the trigger. |
| `value` | double |  | Value of measurement based on which condition is applied. |

#### Trigger

> Example of a cooldown block that ends when the athlete's heart rate drops below 60 BPM:

```javascript
{
  "duration": {
    "condition": "lt",
    "trigger": "heart_rate",
    "value": 60
  },
  "description": "Run for 5K",
  "type": "cooldown",
  "target_type": "none"
}
```

Event or measurement that triggers the advancement to the next block or guide completion. When the trigger is set to `user`, the guide will not advance automatically. It is good practice to remind athletes about that using the block's description object. Athlete can manually advance to the next block irrespective what trigger value is.

| Value | Description |
| :--- | :--- |
| `user` | Athlete requests next block. |
| `time` | Block timer. |
| `distance` | Block distance. |
| `hr` | Live heart rate. |
| `block_hr` | Block avarage heart rate. |
| `speed` | Live speed or pace. |
| `block_speed` | Block avarage speed or pace. |
| `cadence` | Live cadence. |
| `power` | Live power. |
| `power3` | Live power avarege of last 3 seconds. |
| `power10` | Live power avarege of last 10 seconds. |
| `power30` | Live power avarege of last 30 seconds. |
| `block_power` | Block avarage power. |
| `swim_stroke` | Swim stroke count. |

#### Condition

> Example of the block that advances to the next block after 5K:

```text
{
  "duration": {
    "condition": "gte", // note `gte` instead of `eq`
    "trigger": "distance",
    "value": 5000
  },
  "description": "Run for 5K",
  "type": "work",
  "target_type": "none"
}
```

> You could read out loud above block's completion condition like so: _â€œThis block will be done when athlete covers the distance that is greater than or equal to 5000 meters.â€_

Condition object describes an operator that is applied to the measurement and value of value object in the block completion.

| Value | Symb. | Description |
| :--- | :---: | :--- |
| `lt` | &lt; | Less than |
| `lte` | â‰¤ | Less than or equal to. |
| `eq` | = | Strictly equal to. |
| `gte` | â‰¥ | Greater than or equal to. |
| `gt` | &gt; | Greater than. |

 Note that equality \(`eq`\) is strict equality. When designing blocks that are complete at after 5000 meters, guide designer must use greater than or equal to condition operator instead of equal to as recorder might sample distance values just before and after athlete passes 5K mark. Neither 4998.9 not 5000.4 are strictly equal to 5000, thus block never ends.

### Block Targets

> Example block without a target has a duration of two minutes:

```javascript
{
  "type": "work",
  "target_type": "none",
  "duration": {
    "condition": "gte",
    "trigger": "time",
    "value": 120
  },
  "description": "Simply run for two minutes.",
}
```

Block object can have one of four types of targets as described in `target_type`.

| Value | object Key | Description |
| :--- | :--- | :--- |
| [`none`]() | N/A | Block has no target \(a.k.a. _Free Block_.\) |
| [`value`]() | `target_value` | The athlete is asked to be in the range of specific numbers for the given [metric](). |
| [`rvalue`]() | `target_rvalue` | The athlete is asked to be the range that is calculated by multiplying relative values to fitness values from the [profile]() of the given [metric]() and [anchor](). |
| [`zone`]() | `target_zone` | The athlete is asked to hit zone at the given index. Zone index is independent of the athlete's choice zone set, The guide should specify what zone-set it is designed to work. |

Unless `none` is a value of `target_type`, the block must have a corresponding target object as its content.

#### No Target \(Free Block\)

No target block. The athlete may do whatever they want. This kind of block is useful when "target" is to complete the block.

#### Absolute Value Target

> Example of block with `target_type: value`. An athlete is asked to maintain heart rate within 80â€“100 BPM range for 20 minutes:

```javascript
{
  "type": "work",
  "target_type": "value",
  "target_value": {
    "metric": "heart_rate",
    "lower": 80,
    "upper": 100,
  },
  "duration": { "condition": "gte", "trigger": "time", "value": 1200 }
}
```

Absolute value target object describes the specific range of values of a given [metric]() that athlete should aim.

All fields are required.

| Key | Type | Description |
| :--- | :--- | :--- |
| `metric` | [metric]() | Target metric |
| `lower` | double | Lower bound |
| `upper` | double | Upper bound \(exclusive\) |

 While absolute value targets are straightforward and easy to understand, note that it is infrequent when the same values work for different athletes. If you intent sharing the guide online, consider using [Relative Value Target]() objects as they calculate absolute ranges based on an athlete's profile.

#### Relative Value Target

> Example of the block with `target_type: rvalue`. An athlete is asked to maintain 90â€“110% of her FTP during 2 minutes:

```javascript
{
  "type": "work",
  "target_type": "rvalue",
  "target_value": {
    "metric": "power",
    "anchor": "threshold",
    "lower": 0.9,
    "upper": 1.1,
  },
  "duration": { "condition": "gte", "trigger": "time", "value": 120 }
}
```

Unlike absolute value target, relative values targets are calculated based on data points from the athlete's [profile](). They can be universal for many types among the people and automatically change over time as an athlete's physique and profile changes. As with absolute values, the target range is set with `lower` and `upper` bound values, but instead of exact measurements, they contain multipliers. Those values get multiplied by a measurement from profile based on the combination of values from `metric` and `anchor`.

For instance, if the value of `metric` is `power` and value of `anchor` is `threshold`, then multipliers from the target's `lower` and `upper` are applied to the [profile]()'s `ftp` value.

All fields are required.

| Key | Type | Description |
| :--- | :--- | :--- |
| `metric` | [metric]() | Target metric |
| `anchor` | [anchor]() | Relative to what profile measurement |
| `lower` | double | Lower bound multiplier |
| `upper` | double | Upper bound multiplier \(exclusive\) |

#### Zone Target

> Example of the block with `target_type: zone`. An athlete is asked to maintain heart rate zone 3 for 4 kilometers:

```javascript
{
  "type": "work",
  "target_type": "zone",
  "target_value": {
    "metric": "heart_rate",
    "index": 3,
  },
  "duration": { "condition": "gte", "trigger": "distance", "value": 4000 }
}
```

Zone Target object describes which zone athlete should aim for, and what kind of zone it should be. Note that the value of `index` is an index of a zone in an array of zones in a zone set. Meaning, if an athlete replaces zone set with a different one, a new zone that is located at the same index of `index` becomes the new target zone. It is an athlete's responsibility to make sure that selected zone set matches requirements of the target and guide.

All fields are required.

| Key | Type | Description |
| :--- | :--- | :--- |
| `metric` | [metric]() | Type of metric of which zone should be used. |
| `index` | int | Index of a selected zone-set. |

#### Metric

Metric object describes what type of measurement target value range is.

| Value | Description |
| :--- | :--- |
| `heart_rate` | Heart rate |
| `cadence` | Cadence â€” RPM for cycling and handcycling; SPM for running; PPM for wheelchair. |
| `power` | Power. |
| `speed` | Speed or pace. |

#### Metric Anchor

Anchor object describes relative to which data point in athlete's [profile]() the final target range should be calculated against.

| Value | Description |
| :--- | :--- |
| `min` | An athlete's minumum measured value for the metric \(e.g. **Resting HR** when `metric: heart_rate`.\) |
| `max` | An athlete's maximum measured value for the metric \(e.g. **MaxHR** when `metric: heart_rate`.\) |
| `threshold` | An athlete's threashold value for the metric \(e.g. **FTP** when `metric: power` and `sport: cycle`.\) |
| `test` | Test time measurement \(e.g. swim test time\) |

 There are many combinations of `metric` and `anchor` that do not make sense. Such cases should be handled with care. For instance, what is minimum power? Minimum power athlete can produce is always equal to 0 watts \(i.e., not pedaling.\) Anchoring a target range on 0 watts is not particularly useful since both, lower and upper bounds always equal to 0.

## Profile

> Example of an athelete's complete profile:

```javascript
{
    "version": "https://fitnessjson.org/version/1.0.0-alpha.2#profile",
    "name": "John Appleseed",
    "email": "johnappleseed@example.com",
    "hrr": 48,
    "hrmax": 201,
    "lthr": 169,
    "ftp": 220,
    "rftpw": 240,
    "vo2max": 39,
    "weight": 74.4,
    "height": 170,
    "swim_test_dist": 1000,
    "swim_test_time": 500,
    "run_tpace": 4.7,
    "birthday": "1988-04-17",
    "sex": "male",
    "wheelchair": false,
    "handcycle": false
}
```

> Example of the minimal profile for a cyclist:

```javascript
{
    "version": "https://fitnessjson.org/version/1.0.0-alpha.2.0#profile",
    "lthr": 169,
    "ftp": 220,
    "vo2max": 39,
    "weight": 74.4,
}
```

Profile object describes various athlete's measurements and data points. Profile object features several arbitrary categories: basic body measurements, fitness test results, accessibility information, and contact information.

Profile object is not a database; hence there is no historical information in it. When faced with a profile without any context, the decoder should assume that profile has _latest known data_. When profile object is part of another object \([for instance, a workout]()\), then the decoder can map the parent object's date to the profile.

#### Top Level

Since profile may be embedded into other objects, all values are optional.

| Key | Type | Unit | Description |
| :--- | :--- | :--- | :--- |
| `version` | url |  | URL of the version of the format the object. |
| `name` | string |  | Full name of an athlete. |
| `email` | string |  | Contact email of an athlete. |
| `birthday` | [datetime]() |  | Date of birth. |
| `sex` | [sex]() |  | Biological sex of an athelete. |
| `hrr` | int | BPM | Resting heart rate. |
| `hrmax` | int | BPM | Maximum heart rate. |
| `lthr` | int | BPM | Lactate threashold heart rate, LTHR. |
| `ftp` | int | W | Cycling threashold power, FTP. |
| `rftpw` | int | W | Runnning functional threashold power, rFTPw. |
| `vo2max` | int | mL/\(kgÂ·min\) | Maximal oxygen consumption of an athlete. |
| `weight` | int | kg | Weight of an athelete. |
| `swim_test_dist` | double | m | Distance of the swim test. |
| `swim_test_time` | double | s | Recorded completion time of the swim test \(for the distance.\) |
| `run_tpace` | double | m/s | Running threashold pace. |
| `wheelchair` | bool |  | `true` when atehlete is a wheelchair user. Ommition of this key is equvalentn of `false` value. |
| `handcycle` | bool |  | `true` when atehlete is a handlcuyle user. Ommition of this key is equvalentn of `false` value. |

`swim_test_dist` and `swim_test_time` are only interdependent values in the profile object. They are considered as valid only if both are present.

 Developers should pay extra attention when sharing profile to other parties or apps, as it may contain highly private information, both from user privacy, and competitive perspective. **Do not share a profile object in any form without user consent.**

## Route

> Example of a route with single POI and two paths:

```javascript
{
  "version": "https://fitnessjson.org/version/1.0.0-alpha.2#route",
  "name": "Sunday Group Ride (Spring 2019)",
  "description": "Note for new members: we'll take alternative path starting from 30km point (marked so) to avoid two climbs.",
  "paths": [
    {
      "waypoints": [
        { "lt": 36.486331, "ln": 136.756827 },
        { "lt": 36.486331, "ln": 136.756827 },
        { "lt": 36.486331, "ln": 136.756827 },
      ],
      "name": "Main Cycling Path",
      "color": "#F7C948"
    },
    {
      "waypoints": [
        { "lt": 36.486331, "ln": 136.756827 },
        { "lt": 36.486331, "ln": 136.756827 },
        { "lt": 36.486331, "ln": 136.756827 },
      ],
      "name": "Novice Detour",
      "color": "#8DED2D"
    }
  ],
  "poi": [
    {
      "coordinate": { "lt": 36.486331, "ln": 136.756827 },
      "name": "Coffee Stop",
      "color": "#E67635"
    }
  ],
  "ref": "https://leopardskins-cyclingclub.org/ride/1234"
}
```

Routes are geographical information about paths and POIs \(points-of-interest\) used as a map overlay while performing an activity. Routes shouldn't require specific workouts but may have additional information. The primary use of the route is to serve as additional geographical information for an athlete regardless of activity or sport. Example paths could be weekly sunday bike ride route with its alternative loops, and resting and coffee-stop locations.

The athlete may choose to use routes as an assistance to a guided workout and have POIs indicating starts or ends of significant efforts or target heart rate zones.

#### Top Level

Route files are self-contained and not part of any other file or object.

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `version` | url | âœ“ | URL of the version of the format the file. |
| `name` | string |  | Title of the route file. |
| `description` | string |  | Descriptive, multiline text. |
| `paths` | [\[path\]]() |  | Array of paths that are part of the route. |
| `pois` | [\[path\]]() |  | Colleciton of points of interest. |
| `ref` | string |  | Reference URL. |

### Path

The path is a representation of a single, uninterrupted track within a route, presented as a colored line with a short name that describes it.

> Example of a short path that is made of six waypoints:

```javascript
{
  "waypoints": [
    { "lt": 36.486331, "ln": 136.756827 },
    { "lt": 36.486331, "ln": 136.756827 },
    { "lt": 36.486331, "ln": 136.756827 },
    { "lt": 36.486331, "ln": 136.756827 },
    { "lt": 36.486331, "ln": 136.756827 },
    { "lt": 36.486331, "ln": 136.756827 }
  ],
  "name": "Main Cycling Path",
  "color": "#F7C948"
}
```

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `waypoints` | [\[location\]]() | âœ“ | An array of ordered coordinates that make up the path. |
| `name` | string |  | Short title. |
| `color` | string |  | A 16-bit, hexadecimal representation of the color. e.g. `#FF9900` for the orange. May not contain leading `#`. |

Order of coordinates in `waypoints` is essential. The path is made by connecting previous waypoint to the current one. After that cursor is advanced to the next waypoint and process is repeated until the waypoints array is exhausted.

Each path is uninterrupted. User can use multiple paths with the same `name` and `color` if such behavior is required.

 Note that horizontal and vertical accuracy values \(`ha` and `va` respectively\) in location, when used describing path will be ignored. Path objects must have accurate coordinates.

### POI

POI, or Point of Interest, is a representation of a single place on the route, presented as a color dot with a short name that describes it. POIs are designed to be glanceable and straightforward during the activity.

> Example of a cafÃ© near Kanazawa:

```javascript
{
  "coordinate": {
    "lt": 36.486331,
    "ln": 136.756827
  },
  "name": "1st Coffee Stop",
  "color": "#E67635"
}
```

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `coordinate` | [location]() | âœ“ | Coordinate of the place. |
| `name` | string |  | Short title. |
| `color` | string |  | A 16-bit, hexadecimal representation of the color. e.g. `#FF9900` for the orange. May not contain leading `#`. |

 Note that horizontal and vertical accuracy values \(`ha` and `va` respectively\) in location, when used describing POI will be ignored. POI objects must have accurate coordinates.

## Common Types

### DateTime

DateTime, date, or just `t`, should be specified as a string in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format or [UNIX Time](https://en.wikipedia.org/wiki/Unix_time).

In cases where DateTime repeats frequently, or sub-second precision is required, the encoder should use UNIX time format. It is a good practice to use ISO 8601 in all cases but in [samples](), where **UNIX Time** is advantageous as the value of `t`.

### Sport

Following sports are suppoted by fitnessÂ·json:

| Value | Description |
| :--- | :--- |
| `run` | Runnning |
| `cycle` | Cycling on a two-wheeled bicycle |
| `swim` | Any style of swimming |
| `walk` | Walking. Maybe a slow-paced stroll, tracking, or racewalking. |
| `transition` | Activity performed in between two different disciplines, as in triathlon. Should be treated synonymous to running when no accessibility options are present. |
| `wheelchair` | Race pace wheelchair |
| `handcycle` | Handcycling |

Note that `wheelchair` and `handcycle` are distinct types of activity and must not be replaced by `run` and `cycle` respectively. fitnessÂ·json format respects para-sport as-is and treats them as first-class citizens.

### Environment

The environment of activity.

| Value | Description |
| :--- | :--- |
| `indoor` | Performed indoors. Usually means that GPS data is not available or should be ignored. |
| `outdoor` | Performed outdoors, where GPS information and atmospheric conditions matter or provide context. |
| `virtual` | Performed in vistual environments such as computer games, simulations, etc. |

### Sex

Biological sex may be useful when calculating calorie burn during the workouts. Ideally, this metric should be highly optional and not required Possible values for sex are:

| Value | Description |
| :--- | :--- |
| `unknown` | **Default** value |
| `male` | Male |
| `female` | Female |
| `other` | Athlete explicitly declined to provide sex information. |

**Difference beween `unknown` and `other`**

Value of `unknown` is assumed as the default value when the athlete does not provide sex. This value of `unknown` grants application to make an educated guess of the athlete's biological sex if it is beneficial to the data analysis. Value of `other`, explicitly tells the decoder that sex-based decisions must be avoided as they are inaccurate or not appropriate for the athlete.

### Author

> Example of complete author object:

```javascript
{
  "name": "Joana Appleseed",
  "email": "joanaappleseed@example.com",
  "link": "https://leopardskins-cyclingclub.org",
  "profile_picture_url": "https://s3.amazonaws.com/uifaces/faces/twitter/jina/128.jpg"
}
```

Auhtor, or person object describes and indetifies a person and her contact information.

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `name` | string |  | Full name of a person. |
| `email` | string |  | Contact email of a person. |
| `link` | string |  | Home web page, blog, or social account. |
| `profile_picture_url` | string |  | URL string of the profile image. Should not be a large file. |

### Comment

> Example of comment object:

```javascript
{
  "date": "2019-04-21T04:37:13+00:00",
  "text": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",  
  "author": {
    "name": "Joana Appleseed",
    "email": "joanaappleseed@example.com",
    "link": "https://leopardskins-cyclingclub.org",
    "profile_picture_url": "https://s3.amazonaws.com/uifaces/faces/twitter/jina/128.jpg"
  }
}
```

Auhtor, or person object describes and indetifies a person and her contact information.

| Key | Type | Req. | Description |
| :--- | :--- | :---: | :--- |
| `date` | datetime | âœ“ | Date comment was created |
| `text` | string | âœ“ | Contents of the comment |
| `author` | [author]() |  | Author of the comment. |

When `author` is not present in comment object, the decoder should assume the athlete herself authored a comment as a post-workout note.

